<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap4.min.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/5.3.2/bootbox.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap4.min.js"></script>


  <title>Document</title>

  <script>
    $(document).ready(function () {
      $("#submit").click(function () {
        $("#myModal").modal();


      });

      $("#addcalender").click(function () {



      });
      $("#drop").click(function () {
        $("#first").attr('disabled', true);

      });

      var dataSet = [
        {
          "date": "2019-11-1",
          "name": "รับเบี้ยเลี้ยงผู้สูงอายุ",

        },
        {
          "date": "2019-11-8",
          "name": "รับถุงยังชีพพระราชทาน",

        },

      ];

      var table = $('#myTable').DataTable({
        responsive: true,       //for responsive column display
        deferRender: true,      //if large data, use this option
        data: dataSet,
        columns: [
          { data: "date", title: "วันที่" },
          { data: "name", title: "ข่าว" },
          { title: "Action", orderable: false, defaultContent: "<button class='btn btn-danger my-1'>ลบ</button> <button class='btn btn-warning my-1'>แก้ไข</button>" }
        ],
        columnDefs: [
          // make the last column align right, also target: "_all"
          { "className": "dt-center", "targets": 2 }
        ]
      });
      // Delete 
      $('#myTable tbody').on('click', '.btn-danger', function () {
        var gun = table.row($(this).parents('tr')).data();
        // console.log(data.id);

        gun.date = dataSet.splice;
        gun.name = dataSet.splice;
        $(this).parents("tr").remove();
        // console.log(data);
        // let id = $("#txtId").val();
        // $( this ).parent("tr").remove();
        // for (i = 0; i < dataSet.length; i++) {
        //     if (dataSet[i].id == data["id"]) {
        //         var delet = dataSet[i].id;
        //         table.row($(this).parents('tr')).remove().draw(false);
        //         break;
        //     }

      });

      // Edit
      $('#myTable tbody').on('click', '.btn-warning', function () {
        // read data of the selected row
        check = 1;
        var data = table.row($(this).parents('tr')).data();

        // show data in modal

        $("#date").val(data.date);
        $("#txtName").val(data.name);

        // show modal
        $("#modalEdit").modal("show");

      });

      // Edit and save
      $("#btnSave").click(function () {
        if (check == 1) {
          let date = $("#date").data();
          let name = $("#txtName").val();
          console.log(date + " " + name + " " + organize + " " + info);

          //search JS object array for "id"
          for (var i = 0; i < dataSet.length; i++) {
            if (dataSet[i].date == date) {
              break;
            }
          }

          //close modal
          $("#modalEdit").modal('hide');
          //get selected row and update value

          let temp = table.row(i).data();
          temp.date = date;
          temp.name = name;

          //update data table
          table.row(i).data(temp).invalidate();
        } else {
          let date = $("#date").val();
          let name = $("#txtName").val();
          //  console.log(id+" "+name+" "+gender+" "+major+" "+school); 

          //close modal
          $("#modalEdit").modal('hide');
          table.row.add({
            "date": date,
            "name": name

          }).draw();
        }


      });
      $("#add").click(function () {
        check = 0;
        $("#date").val("");
        $("#txtName").val("");
        $("#modalEdit").modal("show");

      });


    });
  </script>

  <style>
    .navbar {
      background-color: darkslategrey;
    }

    #logout {
      border: 2px solid red;
      color: red;
    }

    h3,
    h5 {
      text-align: center;

    }

    #c {
      text-align: center;
    }

    #d {
      color: red;
    }

    .modal-header,
    h4,
    .close {
      background-color: #5cb85c;
      color: white !important;
      text-align: center;
      font-size: 30px;
    }

    .modal-footer {
      background-color: #f9f9f9;

    }

    input[type=text],
    input[type=password] {
      width: 100%;

      display: inline-block;
      border: none;
      background: #f1f1f1;
    }

    .card {
      height: 90%;
    }

    .card-text {
      font-size: 80%;
    }

    .img-top {
      text-align: center;
    }
  </style>
</head>

<body style="background-color: gainsboro;">



  <!-- Navigation -->
  <nav class="navbar navbar-expand-sm navbar-dark ">
    <img src="p.png" style="width: 3%; height: 3%;" class="mr-2">
    <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#collapsibleNavId"
      aria-controls="collapsibleNavId" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="collapsibleNavId">
      <form class="form-inline">
        <input class="form-control mr-sm-2" type="text" placeholder="ค้นหา">
        <button class="btn btn-success" type="submit">ค้นหา</button>
      </form>

    </div>

    <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
      <li class="nav-item active">
        <a class="nav-link" href="#">หน้าหลัก <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">แก้ไขโฆษณา
          <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="#" style="color: black;">สไลด์กิจกรรม</a></li>
          <li><a href="#" style="color: black;">มุมสุขภาพ</a></li>
          <li><a href="#" style="color: black;">ข่าว</a></li>
        </ul>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">กราฟ</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">กิจกรรม</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#"></a>
      </li>

    </ul>

    <button type="button" class="btn btn-danger mr-2" id="submit">ออกจากระบบ</button>

  </nav>


  </div>
  <div class="row">
    <div class="col-12">

      <h3 class="mt-2">ข่าวประชาสัมพันธ์</h3> <button id="add"
        class="btn btn-success float-right mb-2 mt-1 mr-5">เพิ่มข่าว</button>
    </div>
  </div>
  <div class="container my-2 mt-2 " style="background-color: white;">
    <table id="myTable" class="table table-striped table-bordered " style="width:100%">
    </table>

    <!-- Modal -->
    <div class="modal fade" id="modalEdit">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="modelTitleId">Edit</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <input type="date" class="form-control mb-1" id="date">
            <input type="text" class="form-control mb-1" id="txtName" placeholder="ชื่อกิจกรรม">

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">ปิด</button>
            <button id="btnSave" type="button" class="btn btn-success">บันทึก</button>
          </div>
        </div>
      </div>
    </div>
  </div>





  <footer style="background-color: darkslategray">
    <div class="container-fluid padding mt-3">
      <div class="row text-center text-light">
        <div class="col-md-4">
          <hr class="light">
          <h5>ฉุกเฉิน</h5>
          <hr class="light">
          <div class="row">
            <div class="col-sm-12" id="d">
              <img src="support.png" alt="" width="30">
              โทร: 091-2828333
            </div>


          </div>
        </div>
        <div class=" col-md-4">
          <hr class="light">
          <h5>เกี่ยวกับเรา</h5>
          <hr class="light">
          <p class="mt-2">ศูนย์จัดเตรียมกิจกรรมมากมายเพื่อผู้สูงอายุ
            และข่าวประชาสัมพันธ์เรื่องสุขภาพเพื่อชีวิตที่ดีขึ้น</p>


        </div>



        <div class="col-md-4">
          <hr class="light">
          <h5>ติดต่อเรา</h5>
          <hr class="light">
          <p class="mt-1">Office: 02-222-0000</p>
          <p>Address:City, State, 00000</p>

        </div>

      </div>
    </div>
  </footer>

  </div>
  <!-- new -->



</body>

</html>